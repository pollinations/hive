(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class f{constructor(){this.currentQuestion=0,this.currentPrize=0,this.isGameActive=!1,this.helpLinesUsed={fiftyFifty:!1,phoneFriend:!1,askAudience:!1,askHost:!1},this.moneyLadder=[500,1e3,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6],this.safeHavens=[1e3,5e4],this.initializeElements(),this.attachEventListeners()}initializeElements(){this.questionElement=document.getElementById("question"),this.answerButtons=Array.from(document.getElementsByClassName("answer-button")),this.moneyItems=Array.from(document.getElementsByClassName("money-item")),this.currentPrizeElement=document.getElementById("current-prize"),this.messageElement=document.getElementById("message"),this.startButton=document.getElementById("start-game"),this.quitButton=document.getElementById("quit-game"),this.fiftyFiftyButton=document.getElementById("fifty-fifty"),this.phoneFriendButton=document.getElementById("phone-friend"),this.askAudienceButton=document.getElementById("ask-audience"),this.askHostButton=document.getElementById("ask-host")}attachEventListeners(){this.startButton.addEventListener("click",()=>this.startGame()),this.quitButton.addEventListener("click",()=>this.quitGame()),this.answerButtons.forEach(e=>{e.addEventListener("click",()=>this.handleAnswer(e))}),this.fiftyFiftyButton.addEventListener("click",()=>this.useFiftyFifty()),this.phoneFriendButton.addEventListener("click",()=>this.usePhoneFriend()),this.askAudienceButton.addEventListener("click",()=>this.useAskAudience()),this.askHostButton.addEventListener("click",()=>this.useAskHost())}async startGame(){this.isGameActive=!0,this.currentQuestion=0,this.currentPrize=0,this.helpLinesUsed={fiftyFifty:!1,phoneFriend:!1,askAudience:!1,askHost:!1},this.startButton.style.display="none",this.quitButton.style.display="block",this.currentPrizeElement.textContent="0",this.updateMoneyLadder(-1),await this.loadNextQuestion()}quitGame(){const e=this.getGuaranteedPrize();this.showMessage(`Game Over! You're walking away with $${e.toLocaleString()}`),this.resetGame()}resetGame(){this.isGameActive=!1,this.startButton.style.display="block",this.quitButton.style.display="none",this.answerButtons.forEach(e=>{e.disabled=!1,e.className="answer-button",e.textContent=e.getAttribute("data-index")==="0"?"A: ":e.getAttribute("data-index")==="1"?"B: ":e.getAttribute("data-index")==="2"?"C: ":"D: "}),this.enableAllHelpLines(),this.updateMoneyLadder(-1),this.questionElement.textContent="Welcome to Who Wants to Be a Millionaire! Click Start Game to begin."}async loadNextQuestion(){const t=`Generate a multiple choice trivia question for "Who Wants to Be a Millionaire?" 
                       Difficulty level: ${Math.min(9,Math.floor(this.currentQuestion/2))}/9 (0 being easiest, 9 being hardest).
                       Format: Return a JSON object with the following structure:
                       {
                           "question": "The question text",
                           "answers": ["correct answer", "wrong answer 1", "wrong answer 2", "wrong answer 3"],
                           "correctIndex": 0
                       }
                       Make sure the question is challenging but fair, and all answers are plausible.`;try{const s=await(await fetch("https://text.pollinations.ai/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are a game show question writer."},{role:"user",content:t}],jsonMode:!0})})).json();this.currentQuestionData=s,this.questionElement.textContent=s.question,this.answerButtons.forEach((i,o)=>{i.textContent=`${String.fromCharCode(65+o)}: ${s.answers[o]}`,i.disabled=!1,i.className="answer-button"}),this.updateMoneyLadder(this.currentQuestion)}catch(n){console.error("Error loading question:",n),this.showMessage("Error loading question. Please try again.")}}async handleAnswer(e){if(!this.isGameActive)return;const t=parseInt(e.getAttribute("data-index"));if(e.classList.add("selected"),this.answerButtons.forEach(n=>n.disabled=!0),await new Promise(n=>setTimeout(n,2e3)),t===this.currentQuestionData.correctIndex)e.classList.add("correct"),this.currentPrize=this.moneyLadder[this.currentQuestion],this.currentPrizeElement.textContent=this.currentPrize.toLocaleString(),this.currentQuestion===this.moneyLadder.length-1?(this.showMessage("Congratulations! You've won the million dollars!"),this.resetGame()):(this.currentQuestion++,await new Promise(n=>setTimeout(n,1500)),await this.loadNextQuestion());else{e.classList.add("wrong"),this.answerButtons[this.currentQuestionData.correctIndex].classList.add("correct");const s=this.getGuaranteedPrize();this.showMessage(`Game Over! You walk away with $${s.toLocaleString()}`),await new Promise(i=>setTimeout(i,2e3)),this.resetGame()}}getGuaranteedPrize(){let e=0;for(let t=0;t<this.currentQuestion;t++)this.safeHavens.includes(this.moneyLadder[t])&&(e=this.moneyLadder[t]);return e}updateMoneyLadder(e){this.moneyItems.forEach((t,n)=>{t.classList.remove("active"),n===e&&t.classList.add("active")})}showMessage(e){this.messageElement.textContent=e}async useFiftyFifty(){if(this.helpLinesUsed.fiftyFifty||!this.isGameActive)return;this.helpLinesUsed.fiftyFifty=!0,this.fiftyFiftyButton.disabled=!0;const e=this.currentQuestionData.correctIndex,t=[0,1,2,3].filter(s=>s!==e),n=[e,t[Math.floor(Math.random()*t.length)]];this.answerButtons.forEach((s,i)=>{n.includes(i)||(s.disabled=!0,s.style.opacity="0.3")})}async usePhoneFriend(){if(this.helpLinesUsed.phoneFriend||!this.isGameActive)return;this.helpLinesUsed.phoneFriend=!0,this.phoneFriendButton.disabled=!0;const e=`As an expert friend, analyze this question and provide your thoughts:
                       Question: ${this.currentQuestionData.question}
                       Options: ${this.answerButtons.map(t=>t.textContent).join(", ")}
                       Provide a natural response as if you're on the phone, with about 80% accuracy.`;try{const n=await(await fetch("https://text.pollinations.ai/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are an expert friend helping on Who Wants to Be a Millionaire."},{role:"user",content:e}]})})).json();this.showMessage(`Friend says: ${n.content}`)}catch{this.showMessage("Sorry, couldn't reach your friend. Try another lifeline!")}}async useAskAudience(){if(this.helpLinesUsed.askAudience||!this.isGameActive)return;this.helpLinesUsed.askAudience=!0,this.askAudienceButton.disabled=!0;const e=this.currentQuestionData.correctIndex,t=Array(4).fill(0),s=1-Math.min(9,Math.floor(this.currentQuestion/2))*.08,i=Math.floor(s*100);t[e]=i;const o=100-i,a=[0,1,2,3].filter(r=>r!==e);a.forEach((r,c)=>{t[r]=c===a.length-1?o-a.slice(0,-1).reduce((d,l)=>d+t[l],0):Math.floor(o/(a.length-c))});const u=this.answerButtons.map((r,c)=>`${r.textContent.split(":")[0]}: ${t[c]}%`).join(`
`);this.showMessage(`Audience Results:
${u}`)}async useAskHost(){if(this.helpLinesUsed.askHost||!this.isGameActive)return;this.helpLinesUsed.askHost=!0,this.askHostButton.disabled=!0;const e=`As the game show host, provide a helpful but indirect hint about this question:
                       Question: ${this.currentQuestionData.question}
                       Options: ${this.answerButtons.map(t=>t.textContent).join(", ")}
                       Give a clever hint that helps narrow down the options without directly revealing the answer.`;try{const n=await(await fetch("https://text.pollinations.ai/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are the host of Who Wants to Be a Millionaire."},{role:"user",content:e}]})})).json();this.showMessage(`Host: ${n.content}`)}catch{this.showMessage("The host seems to be at a loss for words!")}}enableAllHelpLines(){Object.keys(this.helpLinesUsed).forEach(e=>{this.helpLinesUsed[e]=!1}),this.fiftyFiftyButton.disabled=!1,this.phoneFriendButton.disabled=!1,this.askAudienceButton.disabled=!1,this.askHostButton.disabled=!1}}document.addEventListener("DOMContentLoaded",()=>{window.game=new f});
