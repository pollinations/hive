<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Graphics Editor</title>
    <link rel="stylesheet" href="/graphics-editor/src/style.css">
</head>
<body>
    <div class="app-container">
        <div class="toolbar">
            <div class="tool-group">
                <button id="select-tool" class="tool-btn" aria-label="Select Tool">Select</button>
                <button id="text-tool" class="tool-btn" aria-label="Text Tool">Text</button>
                <button id="shape-tool" class="tool-btn" aria-label="Shape Tool">Shape</button>
                <button id="image-tool" class="tool-btn" aria-label="Image Tool">Image</button>
            </div>
            <div class="tool-group">
                <input type="color" id="color-picker" title="Color" aria-label="Color Picker">
                <select id="font-family" aria-label="Font Family">
                    <option value="Arial">Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Helvetica">Helvetica</option>
                </select>
                <input type="number" id="font-size" value="16" min="8" max="72" aria-label="Font Size">
            </div>
            <div class="tool-group">
                <button id="bring-forward" aria-label="Bring Forward">Bring Forward</button>
                <button id="send-backward" aria-label="Send Backward">Send Backward</button>
            </div>
            <div class="tool-group">
                <button id="export-btn" aria-label="Export">Export</button>
            </div>
            <div class="tool-group text-command">
                <input type="text" id="text-command" placeholder="Enter text command..." />
                <button id="execute-command">Execute</button>
            </div>
        </div>
        
        <div class="main-content">
            <button class="layers-toggle" aria-label="Toggle Layers Panel" title="Toggle Layers">
                Layers
            </button>
            
            <div class="canvas-container">
                <canvas id="main-canvas"></canvas>
            </div>
            
            <button id="layers-toggle">☰</button>
            <div class="layers-panel">
                <h3>
                    Layers
                    <button class="layers-toggle" aria-label="Close Layers Panel">×</button>
                </h3>
                <div id="layers-list"></div>
            </div>
        </div>
    </div>
    <script type="module">
        // Handle module loading errors
        window.addEventListener('error', function(e) {
            if (e.message.includes('Failed to load module script')) {
                console.error('Module loading error:', e);
            }
        });

        // Import and initialize the editor
        import('/graphics-editor/src/main.js').catch(error => {
            console.error('Failed to load editor:', error);
        });
    </script>
    <script>
        // Expose canvas objects globally for debugging
        window.getCanvasState = () => ({
            objects: window.canvasObjects,
            selected: window.selectedObject
        });
    </script>
</body>
</html>